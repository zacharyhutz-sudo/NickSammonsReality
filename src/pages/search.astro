---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Search Homes | Nick Sammons Realtor">
  <main class="w-full min-h-screen flex flex-col pt-[80px] md:pt-[120px]">
    <div class="px-6 lg:px-12 mb-6 md:mb-12">
        <h1 class="text-3xl md:text-4xl font-serif italic text-stone-900">Property Search</h1>
        <p class="text-[10px] font-bold uppercase tracking-widest text-gold-500 mt-2 mb-6">Powered by Georgia MLS</p>
        <p class="text-sm md:text-base text-stone-600 max-w-2xl font-light leading-relaxed">
            Access the most accurate and up-to-date property data in the state. Through our direct IDX (Internet Data Exchange) integration with the Georgia MLS, you can browse active listings from every participating brokerage, ensuring you never miss a new opportunity in the North Georgia market.
        </p>
    </div>
    
    <div class="flex-1 w-full bg-stone-50 border-t border-stone-200 relative">
      <div id="loading-overlay" class="absolute inset-0 z-10 bg-stone-50 flex items-center justify-center transition-opacity duration-500">
        <div class="flex flex-col items-center gap-4">
            <div class="w-10 h-10 border-2 border-stone-200 border-t-gold-400 rounded-full animate-spin"></div>
            <p class="text-[10px] uppercase tracking-[0.2em] text-stone-400">Loading MLS Data...</p>
        </div>
      </div>
      <iframe 
        id="idx-iframe"
        src="https://nicksammons.georgiamls.com/idxsearch/search-action.cfm?gtyp=loc&sid=0&styp=sale&city=&cnty=&zip=&subd=&sch=&br=0&baf=0&lpl=&lph=&sqftl=&sqfth=&acresL=&acresH=&ybl=&ybh=&orderBy=b&dbk=0&scat=1&submit=Search" 
        class="w-full h-[800px] border-none"
        onload="document.getElementById('loading-overlay').style.opacity = '0'; setTimeout(() => document.getElementById('loading-overlay').style.display = 'none', 500);"
      ></iframe>
    </div>
  </main>
</Layout>

<style>
    /* Ensure the iframe container takes up remaining viewport height */
    main {
        min-height: 100vh;
    }
    
    #idx-iframe {
        min-height: calc(100vh - 200px);
    }

    @media (max-width: 768px) {
        #idx-iframe {
            min-height: calc(100vh - 180px);
        }
    }
</style>
